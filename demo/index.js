!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("logger",[],e):"object"==typeof exports?exports.logger=e():t.logger=e()}(window,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}([function(t,e,o){window,t.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n=function(t,e){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==t&&null==e)return 0;if(null==t)return 1;if(null==e)return-1;o||(t=String(t).toLocaleLowerCase(),e=String(e).toLocaleLowerCase());var n=String(t).localeCompare(e);return n<-1?n=-1:n>1&&(n=1),n},r=function(t,e){return isNaN(t)&&isNaN(e)?0:isNaN(t)?1:isNaN(e)?-1:t<e?-1:t>e?1:0},i=function(t,e){if(t===e)return 0;if(null==t)return 1;if(null==e)return-1;var o,n=t.length,r=e.length;if(n<r)return-1;if(n>r)return 1;for(var i=0;i<n;i++)if(0!=(o=u(t[i],e[i])))return o;return 0},l=function(t,e){if(t===e)return 0;if(null==t)return 1;if(null==e)return-1;var o=Object.keys(t),n=Object.keys(e),r=o.length,i=n.length;if(r===i&&0===r)return 0;if(r>i)return 1;if(r<i)return-1;for(var l,a,f=0;f<r;f++)if(l=o[f],!e.hasOwnProperty(l))return-1;for(f=0;f<i;f++)if(l=n[f],0!==(a=u(t[l],e[l])))return a;return 0},a=function(t,e){return null!=t&&null!=e&&(t instanceof e||("string"==typeof t?e===String:"number"==typeof t?e===Number:"boolean"==typeof t&&e===Boolean))};function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(t,e){if(t===e)return 0;if(null==t)return 1;if(null==e)return-1;var o=f(t),u=f(e);return o!==u?n(o,u):"boolean"===o?r(Number(t),Number(e)):"number"===o?r(t,e):"string"===o?n(t,e):a(t,Date)?function(t,e){if(null===t&&null===e)return 0;if(null===t)return 1;if(null===e)return-1;var o=t.getTime(),n=e.getTime();return o<n?-1:o>n?1:0}(t,e):a(t,Array)?i(t,e):a(t,Object)?l(t,e):0};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return"object"!==s(t)||null===t?t:Array.isArray(t)?function(t){return t.map(function(t){return c(t)})}(t):function(t){var e={};return Object.keys(t).forEach(function(o){var n=t[o];e[o]=c(n)},{}),e}(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if("object"!==p(t)&&"object"!==p(e))throw new Error("Expecting Object got obj1 type: ".concat(p(t)," and  obj2 type: ").concat(p(e)));for(var o,n,r,i=Object.keys(t),l=Object.keys(e),a=i.length,f=l.length,s=0,v=0,y=0,d={},b={},h={},g=0;g<a;g++)o=i[g],e.hasOwnProperty(o)?(h[o]=!0,n=t[o],r=e[o],u(n,r)&&(b[o]="object"===p(n)?c(n):n,d[o]="object"===p(r)?c(r):r,s++)):(n=t[o],b[o]="object"===p(n)?c(n):n,y++);for(g=0;g<f;g++)h[o=l[g]]||(r=e[o],b[o]="delete",d[o]="object"===p(r)?c(r):r,v++);return{forward:d,backward:b,count:v+s+y}}function y(t,e,o,n){o||(o=c);var r=p(t),i=p(e);if(!t||!e||r!==i)return"object"===i?o(e):e;t&&(t=o(t)),e&&(e=o(e));for(var l=Object.keys(e),a=0;a<l.length;a++){var f=l[a],u=t[f],s=e[f];n&&"delete"===s?delete t[f]:u&&"object"===p(u)&&"object"===p(s)?t[f]=d(u,s):t[f]=s}return t}function d(t,e,o){return y(t,e,o)}function b(t,e,o){return y(t,e,o,!0)}function h(t,e){return 0===u(t,e)&&(e=void 0),e}o.d(e,"default",function(){return h}),o.d(e,"compare",function(){return u}),o.d(e,"getDiff",function(){return v}),o.d(e,"combineDiff",function(){return d}),o.d(e,"applyDiff",function(){return b})}])},function(t,e,o){window,t.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.next=null,this.prev=null};o.d(e,"default",function(){return r});var r=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pivot=null,this.head=null,this.tail=null,this.length=0,e&&this.create(e)};r.prototype.insert=function(t,e,o){var r,i,l=new n(t);this.length++,this.pivot?this.pivot.next?(r=this.pivot,i=this.pivot.next,e&&e(r,l,i),l.next=r.next,l.prev=r,r.next=l,i.prev=l,this.pivot=l,o&&o(r,l,i)):(r=this.pivot,e&&e(r,l),r.next=l,l.prev=r,this.pivot=l,this.tail=l,o&&o(r,l)):(e&&e(l),this.pivot=l,this.head=l,o&&o(l))},r.prototype.shiftPivot=function(t){var e,o=this.pivot;for(t>=0&&(e=!0);0!==t;)e?(o=o.next)===this.tail?t=0:t--:(o=o.prev)===this.head?t=0:t++;return this.pivot=o,this.pivot},r.prototype.shiftPivotToHead=function(){this.pivot=this.head},r.prototype.shiftPivotToTail=function(){this.pivot=this.tail},r.prototype.create=function(t){var e=this;t.map(function(t){e.insert(t)})},r.prototype.traverse=function(t,e){for(var o=e?this.tail:this.head;o;)t(o.element),o=e?o.prev:o.next},r.prototype.toArray=function(){var t=[];return this.traverse(function(e){t.push(e)}),t},r.prototype.getPivotElement=function(){return this.pivot?this.pivot.element:null},r.prototype.next=function(){var t=this.pivot.next?this.pivot.next:this.pivot;return this.pivot=t,t},r.prototype.prev=function(){var t=this.pivot.prev?this.pivot.prev:this.pivot;return this.pivot=t,t},r.prototype.isPivotHead=function(){return this.pivot===this.head},r.prototype.isPivotTail=function(){return this.pivot===this.tail},r.prototype.reset=function(){this.pivot=null,this.head=null,this.tail=null,this.length=0}}])},function(t,e,o){"use strict";o.r(e);var n=o(1),r=o.n(n);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){var e=JSON.stringify(t);return JSON.parse(e)}function a(t,e){var o,n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=null,f=l?[]:void 0;if(t)for(a={},o=0;o<t.length;o++)a[n="string"==typeof(r=t[o])?r:r[e]]=r,i&&(t[o]=n),l&&f.push(n);return l?{obj:a,keys:f}:a}function f(t,e,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=i(t),u=i(e);if(null!=t&&null!=e&&r===u&&n){for(var s=a(t,"id",!0),c=a(e,"id",!1,!0),p=c.obj,v=c.keys,y=0;y<v.length;y++){var d=v[y],b=s[d],h=p[d];if(b)if("string"!=typeof b){if("string"!=typeof h)if(h.classDefName!==b.classDefName)s[d]=l(h);else{var g=h.classDefName===o;b.value=f(b.value,h.value,o,g)}}else b!==h&&(s[d]=l(h));else s[d]=l(h),t.push(d)}for(var m=0;m<t.length;m++)t[m]=s[t[m]]}else t="object"===u?l(e):e;return t}function u(t){return"object"!==i(t)||null===t?t:Array.isArray(t)?function(t){return t.map(function(t){return u(t)})}(t):function(t){var e={};return Object.keys(t).forEach(function(o){var n=t[o];e[o]=u(n)},{}),e}(t)}var s=o(0);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e,o){if(o){var n=e.element.forward,r=e.element.backward,i=o.element.forward,l=o.element.backward,a=Object(s.combineDiff)(l,n),f=Object(s.combineDiff)(i,r);e.forward=a,e.backward=f}}function v(t,e,o){for(var n,r;t>0;){"backward"===e?(n=o.pivot,o.shiftPivot(-1)):"forward"===e&&(n=o.shiftPivot(1));var i=n.element[e];r=Object(s.combineDiff)(r,i),t-=1}return r}function y(t,e,o){return"undo"===o?v(-e,"backward",t):v(e,"forward",t)}var d=function t(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logList=new r.a([]),this.saveDiffCallback=null,this.enable=!0,this.lastActiveState=o?e:u(e)};function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e,o){if(o){var n=e.element.forward,r=e.element.backward,i=o.element.forward,l=f(o.element.backward.value,n.value,this.objectVerifier,!0),a=f(i.value,r.value,this.objectVerifier,!0);e.forward=l,e.backward=a}}function g(t,e,o,n){for(var r,i;t>0;){"backward"===e?(r=o.pivot,o.shiftPivot(-1)):"forward"===e&&(r=o.shiftPivot(1));var l=r.element[e];i=f(i,l.value,n,l.classDefName===n),t-=1}return i}function m(t,e,o,n){var r,i=this.context,l=this.logList;n&&(this.objectVerifier=n),r="undo"===e?g(-t,"backward",l,n):g(t,"forward",l,n);var a=this;i.applyDiff.call(i,r,function(){S.call(a),o()})}function S(){this.lastActiveState=this.context.getState()}d.prototype.setSaveCallback=function(t){this.saveDiffCallback=t},d.prototype.removeSaveCallback=function(){this.saveDiffCallback=null},d.prototype.undo=function(t){isNaN(t)&&(t=1);var e=y(this.logList,-t,"undo"),o=Object(s.applyDiff)(this.lastActiveState,e);return this.lastActiveState=o,u(o)},d.prototype.redo=function(t){isNaN(t)&&(t=1);var e=y(this.logList,t,"redo"),o=Object(s.applyDiff)(this.lastActiveState,e);return this.lastActiveState=o,u(o)},d.prototype.save=function(t){if(this.enable){var e=Object(s.getDiff)(this.lastActiveState,t),o=e.forward,n=e.backward;"object"===c(o)&&"object"===c(n)&&(this.logList.insert(e,p),this.lastActiveState=u(t)),this.saveDiffCallback&&this.saveDiffCallback(e)}},d.prototype.getCurrentLog=function(){return this.logList?this.logList.getPivotElement():null},d.prototype.clear=function(){this.logList.reset()};var j=function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e||console.error("Context cant be null"),e.applyDiff||console.error("Context needs to implement applyDiff method"),e.getState||console.error("Context needs to implement getState method"),e.getDiff||console.error("Context needs to implement getDiff method"),this.context=e,this.logList=new r.a([]),this.saveDiffCallback=null,this.enable=!0,this.objectVerifier=o,S.call(this),this.objectVerifier,h=h.bind(this)};j.prototype.setSaveCallback=function(t){this.saveDiffCallback=t},j.prototype.removeSaveCallback=function(){this.saveDiffCallback=null},j.prototype.undo=function(t,e,o){isNaN(t)&&(t=1),m.call(this,-t,"undo",e,o)},j.prototype.redo=function(t,e,o){isNaN(t)&&(t=1),m.call(this,t,"redo",e,o)},j.prototype.save=function(){if(this.enable){var t;if(this.context){var e=t=this.context.getDiff(this.lastActiveState,!0),o=e.forward,n=e.backward;"object"===b(o)&&"object"===b(n)&&(this.logList.insert(t,h),S.call(this))}this.saveDiffCallback&&this.saveDiffCallback(t)}},j.prototype.getCurrentLog=function(){return this.logList?this.logList.getPivotElement():null},j.prototype.clear=function(){this.logList.reset()},o.d(e,"default",function(){return d}),o.d(e,"DiffLogger",function(){return j})},function(t,e,o){"use strict";o.r(e);var n=o(0),r=o.n(n),i=o(2);function l(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var a={value:0,id:"hi",getState:function(){return this.value},setState:function(t){this.value=t},applyDiff:function(t){this.value=t},asJson:function(t,e,o){if(t=void 0===t?this.getState():t,o)return t;var n={id:"hi"};return n.classDefName=e?void 0:this.classDefName,n.displayName=e?void 0:this.displayName,n.value=e?void 0:t,n},getDiff:function(t){var e=this.getState();return void 0!==r()(t,e)?{forward:this.asJson(e),backward:this.asJson(t)}:{forward:this.id,backward:this.id}}};function f(t){console.log(t)}(u=new i.DiffLogger(a)).setSaveCallback(f),a.setState(1),u.save(!0),a.setState(2),u.save(!0),a.setState(3),u.save(!0),a.setState(4),u.save(!0),a.setState(5),u.save(!0),u.undo(),console.log("After Undo: ",a.value),u.undo(),console.log("After Undo: ",a.value),u.undo(),console.log("After Undo: ",a.value),u.undo(),console.log("After Undo: ",a.value),u.redo(),console.log("After redo: ",a.value),u.redo(),console.log("After redo: ",a.value),u.redo(),console.log("After redo: ",a.value),u.undo(2),console.log("After Undo 2 Steps: ",a.value),u.redo(2),console.log("After Redo 2 Steps: ",a.value),a.setState(6),u.save(!0),u.undo(),console.log("After Undo: ",a.value),u.redo(),console.log("After redo: ",a.value),console.log("----------------------------------------");var u,s;a={value:{one:1,two:2},getState:function(){return function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){l(t,e,o[e])})}return t}({},this.value)},setState:function(t,e){this.value[t]=e},applyDiff:function(t){this.value=t}};(u=new i.default(a.getState())).setSaveCallback(f),a.setState("three",3),u.save(a.getState()),a.setState("four",4),u.save(a.getState()),a.setState("five",5),u.save(a.getState()),s=u.undo(),a.applyDiff(s),console.log("After 1 Undo: ",a.value),s=u.undo(),a.applyDiff(s),console.log("After 2 Undo: ",a.value),s=u.redo(),a.applyDiff(s),console.log("After 1 redo: ",a.value),s=u.redo(),a.applyDiff(s),console.log("After 2 redo: ",a.value),s=u.undo(2),a.applyDiff(s),console.log("After Undo 2 Steps: ",a.value),s=u.redo(2),a.applyDiff(s),console.log("After Redo 2 Steps: ",a.value),a.setState("six",6),u.save(a.getState()),s=u.undo(),a.applyDiff(s),console.log("After Undo: ",a.value),s=u.redo(),a.applyDiff(s),console.log("After redo: ",a.value),a.setState("six",66),u.save(a.getState()),s=u.undo(),a.applyDiff(s),console.log("After Undo: ",a.value),s=u.redo(),a.applyDiff(s),console.log("After redo: ",a.value),a.setState("six",{num:6}),u.save(a.getState()),s=u.undo(),a.applyDiff(s),console.log("After Undo: ",a.value),s=u.redo(),a.applyDiff(s),console.log("After redo: ",a.value),a.setState("six",{num:66}),a.setState("five",{num:55}),u.save(a.getState()),s=u.undo(),a.applyDiff(s),console.log("After Undo: ",a.value),s=u.redo(),a.applyDiff(s),console.log("After redo: ",a.value)}])});